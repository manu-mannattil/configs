#!/usr/bin/env bash
#
# ~/.xprofile -- execute commands before starting X
#

if [[ -f "${HOME}/.Xresources" ]]
then
    xrdb -merge "${HOME}/.Xresources"
fi

# Make GTK/QT apps use X input method (Xim).
# Without this, custom mappings in ~/.XCompose won't work.
export GTK_IM_MODULE="xim"
export QT_IM_MODULE="xim"

# Two finger taps = middle click
# Not working on my Inspiron 3442.
# synclient TapButton2=2

# X11 keyboard layout tweaks {{{1
# -------------------------------

# altgr-intl = international version of altgr (which has more symbols)
# caps:swapescape = swap caps lock and escape
# compose:rctrl = right ctrl is the compose key
# lv3:ralt_switch = right alt is altgr
# rupeesign:4 = altgr + 4 gives rupee sign
# terminate:ctrl_alt_bkspc = ctrl + alt + bkspc terminates X

setxkbmap -variant altgr-intl              \
          -option                          \
          -option compose:rctrl            \
          -option caps:swapescape          \
          -option lv3:ralt_switch          \
          -option rupeesign:4              \
          -option terminate:ctrl_alt_bkspc

# PATH manipulation {{{1
# ----------------------

for dir in                  \
    "${HOME}/code/scripts"  \
    "${HOME}/.local/bin"
do
    PATH="${dir}:${PATH}"
done

export PATH

# Environment {{{1
# ----------------

# Preferred web browser.
export BROWSER="/usr/bin/firefox"

# Note that fc(1) in vi-mode uses $VISUAL instead of $FCEDIT.
export EDITOR="/usr/bin/vim"
export FCEDIT="$EDITOR" VISUAL="$EDITOR"

# Set locale properly.  Ubuntu sets LANG to en_IN if IST is selected as the
# time zone.  But many programs (e.g., tmux) don't understand en_IN.
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# Default Mutt profile.
export MUTT_PROFILE="syr"

# 3 minutes to clear the clipboard after copying a password.
export PASSWORD_STORE_CLIP_TIME=180

# Location of password store git repo.
export PASSWORD_STORE_DIR="${HOME}/documents/.password-store"

# Local TEXMF directory.
export TEXMFHOME="${HOME}/.texmf"

# Preferred terminal emulator.
export TERMINAL="${HOME}/code/scripts/terminal"

# Default pager.
export PAGER="less"
export MANPAGER="less"

# File that's imported when the CPython interpreter is called interactively.
export PYTHONSTARTUP="${HOME}/.pythonrc.py"

# Don't save sdcv history.
export SDCV_HISTSIZE=0
