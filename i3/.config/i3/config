# i3wm configuration.

# Basic {{{1
# ----------

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Source Code Pro Semibold 9

# By default windows ought to be tabbed, not tiled.
workspace_layout tabbed

# Keybindings {{{1
# ----------------

# Set mod key to the super (aka "Windows") key.
set $mod Mod4

# Start a terminal.
bindsym $mod+Return exec terminal

# Kill focused window.
bindsym $mod+Shift+q kill

# Change focus.
bindsym $mod+h focus left
bindsym $mod+Left focus left
bindsym $mod+j focus down
bindsym $mod+Down focus down
bindsym $mod+k focus up
bindsym $mod+Up focus up
bindsym $mod+l focus right
bindsym $mod+Right focus right

# Move focused window.
bindsym $mod+Shift+h move left
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Right move right

# Split horizontally (Vim like).
bindsym $mod+s split v

# Split vertically (Vim like).
bindsym $mod+v split h

# Enter fullscreen mode for the focused container.
bindsym $mod+shift+f fullscreen toggle

# Change container layout (stacked, tabbed, toggle split).
bindsym $mod+c layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling/floating.
bindsym $mod+f floating toggle

# Change focus between tiling/floating windows.
bindsym $mod+space focus mode_toggle

# Focus the parent container.
bindsym $mod+a focus parent

# Focus the child container.
bindsym $mod+Shift+a focus child

# Switch to workspace.
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace.
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# Switch between two recent workspaces.
bindsym $mod+b workspace back_and_forth

# Move windows between two recent workspaces.
bindsym $mod+Shift+b move container to workspace back_and_forth

# Lock screen using Mod + Shift + X running i3lock.
bindsym $mod+Shift+x exec --no-startup-id i3lock --ignore-empty-password --show-failed-attempts --color=333333

# Reload the configuration file.
bindsym $mod+Shift+c reload

# Restart i3 inplace (preserves your layout/session, can be used to upgrade i3).
bindsym $mod+Shift+r restart

# Application launchers {{{2
# --------------------------

# Start dmenu/rofi.
# bindsym $mod+d exec dmenu_run -fn 'Source Code Pro Semibold:size=9'
bindsym $mod+d exec rofi -dpi $QT_FONT_DPI -show-icons -show drun

# Run passmenu -- a script to choose pass-managed password store
# entries using dmenu/rofi.
bindsym $mod+p exec passmenu

# Switch windows using rofi.
bindsym $mod+i exec rofi -dpi $QT_FONT_DPI -show window

# Mouse bindings {{{2
# -------------------

# Don't change focused window based on the location of the mouse pointer.
focus_follows_mouse no

# Use mouse+$mod to drag floating windows to their wanted position.
floating_modifier $mod

# The middle button over a titlebar kills the window.
bindsym --release button2 kill

# The middle button and a modifer over any part of the window kills the window.
bindsym --whole-window $mod+button2 kill

# The right button toggles floating.
bindsym button3 floating toggle
bindsym --whole-window $mod+button3 floating toggle

# Disable window switching using mouse scroll.
bindsym button4 nop
bindsym button5 nop

# Media keys {{{2
# ---------------

# For using the brightness keys, install the brightnessctl package and add the
# user to the video group:
#
#   apt install brightnessctl
#   usermod -a -G video <user>
#
bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set 10%+
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10%-

# Volume raise/lower/mute and mic mute keys.
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl -- set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl -- set-sink-volume 0 -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute 1 toggle

# Use arandr (a GUI interface to xrandr) to configure display.
bindsym XF86Display exec --no-startup-id arandr

# Binding mode for resizing windows {{{2
# --------------------------------------

# Enter the resize mode.
bindsym $mod+r mode "resize"

# Resize windows (you can also use the mouse for that).  These bindings
# trigger as soon as you enter the resize mode.
mode "resize" {
  # Pressing left will shrink the window's width.
  bindsym h resize shrink width 10 px or 10 ppt
  bindsym Left resize shrink width 10 px or 10 ppt

  # Pressing down will grow the window's height.
  bindsym j resize grow height 10 px or 10 ppt
  bindsym Down resize grow height 10 px or 10 ppt

  # Pressing up will shrink the window's height.
  bindsym k resize shrink height 10 px or 10 ppt
  bindsym Up resize shrink height 10 px or 10 ppt

  # Pressing right will grow the window's width.
  bindsym l resize grow width 10 px or 10 ppt
  bindsym Right resize grow width 10 px or 10 ppt

  # Back to normal: Enter or Escape.
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# Binding mode for launching applications {{{2
# --------------------------------------------

set $mode_open [b]rowser [f]iles [m]usic [p]rivate-browser
bindsym $mod+o mode "$mode_open"

mode "$mode_open" {
  bindsym b exec firefox; mode "default"
  bindsym f exec spacefm $HOME; mode "default"
  bindsym m exec deadbeef; mode "default"
  bindsym p exec ff-private; mode "default"

  bindsym Escape mode "default"
  bindsym Return mode "default"
}

# Binding mode for exiting {{{2
# -----------------------------

set $mode_exit [e]xit [p]oweroff [r]eebot
bindsym $mod+shift+e mode "$mode_exit"

mode "$mode_exit" {
  bindsym e exec i3-msg exit
  bindsym p exec poweroff
  bindsym r exec reboot

  bindsym Escape mode "default"
  bindsym Return mode "default"
}

# i3bar configuration {{{1
# ------------------------

# Start i3bar to display a workspace bar (plus the system information
# i3status finds out, if available)
bar {
  # Put the bar at the top of the screen.
  position top
  separator_symbol "/"

  colors {
    statusline "#aaaaaa"
  }

  status_command i3status -c ~/.config/i3/i3status.conf

  # Disable workspace switching using mouse scroll.
  bindsym button4 nop
  bindsym button5 nop
}

# Application settings {{{1
# -------------------------

# Floating mode {{{2
# ------------------

for_window [class="Anki"] floating enable
for_window [class="Arandr"] floating enable
for_window [class="matplotlib"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Steam"] floating enable

# Default floating mode for windows (e.g., pop-up) that one wouldn't use for
# more than a few seconds.
for_window [window_role="Preferences"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable

# Terminals and file browser (workspace 1) {{{2
# ---------------------------------------------

for_window [class="Spacefm"] move container to workspace 1
for_window [class="Spacefm"] focus

for_window [class="URxvt"] move container to workspace 1
for_window [class="URxvt"] focus

# Browsers (workspace 2) {{{2
# ---------------------------

for_window [class="Firefox"] move container to workspace 2
for_window [class="Firefox"] focus

# Media (workspace 3) {{{2
# ------------------------

for_window [class="Deadbeef"] move container to workspace 3
for_window [class="Deadbeef"] focus

for_window [class="mpv"] move container to workspace 3
for_window [class="mpv"] floating enable
for_window [class="mpv"] focus

for_window [class="vlc"] move container to workspace 3
for_window [class="vlc"] focus

# Other Internet/network (workspace 2) {{{2
# -----------------------------------------

for_window [class="Filezilla"] move container to workspace 4
for_window [class="Filezilla"] focus

for_window [class="Liferea"] move container to workspace 4
for_window [class="Liferea"] focus

# Large/bloated GUIs (workspace 9) {{{2
# -------------------------------------

for_window [class="libreoffice"] move container to workspace 9
for_window [class="libreoffice"] focus

for_window [class="zoom"] move container to workspace 9
for_window [class="zoom"] focus

for_window [class="lyx"] move container to workspace 9
for_window [class="lyx"] focus

for_window [class="Inkscape"] move container to workspace 9
for_window [class="Inkscape"] focus

for_window [class="Mathematica"] move container to workspace 9
for_window [class="Mathematica"] focus
